{% extends "base.html" %}

{% block body_content %}
{{ super() }}

  <div class="container">
  <div class="row">
  <h1>Displaying a session list for {{ name}} !</h1>


    {# data #}
    {%if data.attachments|length %}
    <h2> Attachments </h2>
    <table class="table table-bordered table-hover" >
        {% for animage in data.attachments %}
            <tr>
                <td><a href="sessions" class="lead"> {{ animage.name}} </a>
                    </td>
                {% if animage.label %}
                  <td> <button type="button" class="btn btn-danger" >Admin</button> </td>
                {% else %}
                {% endif %}
            </tr>
         {% endfor %}
    </table>
    {%endif %}

    </br>

    {%if data.images|length %}
    <h2> {{ data.images|length }} Images </h2>
    <table class="table table-bordered table-hover" >
        {% for animage in data.images %}
            <!-- script> alert("{{data.images[animage]}}"); </script  -->
            <tr>
                <td><a href="sessions" class="lead">{{ data.images[animage].label}}</a> </td>
                <td align="right">
                    <a href="{{animage}}" type="button" class="btn imageitem" imageid="{{animage}}"}> edit </button>
                </td>
                {% if data.images[animage].label %}
                  <td> <img src="{{url_for('tile.tile')}}/{{animage}}/t.jpg" width=100px></td>
                {% else %}
                {% endif %}
            </tr>
         {% endfor %}
    </table>
    {% endif %}
</div>
</div>

{% endblock %}


{% block bootstrap_js_bottom %}
    {{ super() }}
  <script type="text/javascript" src="https://raw.github.com/makeusabrew/bootbox/v2.4.2/bootbox.min.js"></script>

    <script>

        var imagelist = {{ data.images|tojson|safe }};

        $(".imageitem").click(function (e)
            {
            var id = $(this).attr('imageid');
            var image = imagelist[id]

            e.preventDefault();
            bootbox.prompt("Edit the image label :", "Cancel", "OK", function(result) {
                console.log("Result: "+result);
               }, image["label"]);
            });
    </script>
{% endblock %}
