{% extends "base.html" %}

{% block body_content %}
{{ super() }}

{#
<script src="/static/js/jquery-1.9.1.min.js"></script>
<script src="/static/js/jquery-migrate-1.1.0.min.js"></script>
<script>
    $(document).ready(function (){
         $("#signup").submit(function(event) {

            event.preventDefault();

            $("#signup input").attr("disabled","disabled");
            $("#signup button").attr("disabled","disabled");

            $.ajax({
                type: "POST",
                url : "/login.signup",
                data: { name: $("#name").val(), email : $("#email").val() },
                success : function( data ) {
                        data = JSON.parse(data);
                        if(data.hasOwnProperty("success")) {
                            console.log("Success in submisison");
                            show_alert('We have sent an e-mail at "' + $("#email").val() + '". Please follow the instructions to continue with signup.', "success");
                        }
                        if(data.hasOwnProperty("error")) {
                            console.log("Error in submisison");
                            show_alert("Error in new account creation, " + data["error"] + ". You can reset the password if you have forgotten", "error");

                            $("#signup input").removeAttr("disabled");
                            $("#signup button").removeAttr("disabled");
                        }
                    },
                error : function (data){
                        console.log("Error in submisison");
                        console.log(data);
                }
            });
        });
    });
</script>
#}

<div class="container">
    <div class="row">
        <div class="span8">
            <h1>Welcome to Slide Atlas</h1>
            <h3>New Account Information</h3>
        </div>
    </div>
    <br/>
    <div class="row">
        <form action="{{ url_for_security('register') }}" method="POST" name="register_user_form">
            {{ register_user_form.hidden_tag() }}
            <div class="span8">
                <div>
                    {{ register_user_form.full_name.label }}
                    {{ register_user_form.full_name(required=True, pattern="[A-Za-z0-9 ]{3,30}", title="Full name should be 3-30 alpha-numeric characters") }}
                </div>

                <div>
                    {{ register_user_form.email.label }}
                    {{ register_user_form.email(required=True, title="Please enter a valid email here") }}
                </div>

                <div>
                    {{ register_user_form.password.label }}
                    {{ register_user_form.password(required=True) }}
                </div>
                {% if register_user_form.password_confirm %}
                <div>
                    {{ register_user_form.password_confirm.label }}
                    {{ register_user_form.password_confirm() }}
                </div>
                {% endif %}
                {{ register_user_form.submit(class="btn") }}
            </div>
        </form>
    </div>

    <br/>

    <div class="row">
        <div class="span8">
            <p>Your email address will be used to identify your affiliation to courses so that correct slides are provided to you.</p>
            <p>Slide Atlas will not share your email address with anyone else and will not use it for any other purpose than Slide Atlas.</p>
        </div>
    </div>
</div>
{% endblock %}
