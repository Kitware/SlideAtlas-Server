{% extends 'frontend_base.html' %}
{% set active_page = 'sessions' %}


{% block styles %}
{{ super() }}
    <style>
        button {
            float: right;
        }

        .header-link {
          opacity: 0;

          -webkit-transition: opacity 0.2s ease-in-out 0.1s;
          -moz-transition: opacity 0.2s ease-in-out 0.1s;
          -ms-transition: opacity 0.2s ease-in-out 0.1s;
        }

        h2:hover .header-link,
        h3:hover .header-link,
        h4:hover .header-link,
        h5:hover .header-link,
        h6:hover .header-link {
          opacity: 1;
        }

        .anchor {
            padding-top: 60px;
            margin-top: -60px;
        }
    </style>
{% endblock styles %}


{% block content %}
{{ super() }}
    <div class="container">
        {% for (collection, sessions) in all_sessions %}
        <div class="row">
            <h2 id="{{ collection.id}}" class="anchor">{{ collection.label }} <a class="header-link" href="#{{collection.id}}"><span style="font-size:20px"><i class="glyphicon glyphicon-th"></i></span></a>
            {% if site_admin %}
                <a href="{{ '#' }}" class="lead">
                    <button type="button" class="btn btn-primary">Add new session </button>
                </a>
            {% endif  %}
            </h2>
        </div>
        <div class="row">
        </div>
        <table class="table table-bordered table-hover" >
            {% for session, can_admin in sessions %}
            <tr>
                <td>
                    {% if session.type == 'stack' %}
                    <a href="/webgl-viewer/stack?db={{ session.image_store.id|string }}&sess={{ session.id|string }}" class="lead">{{ session.label }}</a>
                    {% else %}
                    <a href="{{ url_for('.view_a_session', session=session) }}" class="lead">{{ session.label }}</a>
                    {% endif %}
                </td>
                {% if can_admin %}
                <td>
                    <a href="{{ url_for('.sessionedit', session=session) }}" class="lead">
                        <button type="button" class="btn btn-danger">Edit</button>
                    </a>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </table>
        <br>
        {% endfor %}
    </div>
{% endblock content %}
