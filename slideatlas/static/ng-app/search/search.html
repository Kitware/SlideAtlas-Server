<div ng-controller="SearchCtrl">
    <div ng-hide="data.loaded">
        <img alt="loading ..." src="/webgl-viewer/static/circular.gif" height="25%">
    </div>

    <div ng-show="data.loaded">
        <div class="row">
            <div class="col-xs-4">
                <input type="text" ng-model="query" placeholder="filter" class="form-control" x-webkit-speech>
            </div>
        </div>

        <accordion close-others="oneAtATime">
            <accordion-group ng-repeat="arole in roles" heading="{{arole.rule}} ({{arole.filtered.length}} sessions)" ng-show="arole.filtered.length > 0">
<!--                 filtered by {{query}}
                <span ng-repeat="asession in arole.sessions | filter : { label : query}"> {{asession.label}} </span>
 -->                <table class="table table-striped">


                    <tr ng-repeat="asession in arole.filtered = (arole.sessions | filter : { label : query})">
                        <td><a href="/sessions/{{asession.sessid}}"> {{ asession.label }} </a> </td>
                    </tr>
                </table>
                    <!-- <session-list sessions="arole.sessions"> {{ asession.label }} </session-list> -->
                    <!-- <dj-li ng-repeat = "asession in arole.sessions track by $index"> {{ asession.label }} </dj-li> -->
                    <!-- <djsessions sess={{arole.sessions track by $index}}/>  -->
            </accordion-group>
        </accordion>
    </div>
</div>